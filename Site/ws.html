<!DOCTYPE html>
<html>
<!-- THIS IS A WEB SOCKET BATTLE TESTER DO NOT INCLUDE IN THE FINAL RELEASE -->
<head>
    <title>websockets tester</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <!-- <link href="lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <script src="lib/bootstrap/js/bootstrap.min.js" type="text/javascript" lang="javascript"></script>
    <link href="navbar.html" rel="import"> -->
    <!-- <script src="lib/js/include.js" type="text/javascript" lang="javascript"></script> -->
    <script src="lib/js/websockets/BCPController.js" type="text/javascript" lang="javascript"></script>
    <script>
        var x, y;
        var J1 = {
            "utente": "Red", "squadra": [
                { "id": 292, "mosse": [10, 86, 92, 230] },
                { "id": 649, "mosse": [328, 312, 68, 126] },
                { "id": 122, "mosse": [184, 66, 3, 46] },
                { "id": 250, "mosse": [163, 14, 220, 170] },
                { "id": 1, "mosse": [28, 19, 31, 56] },
                { "id": 55, "mosse": [253, 10, 41, 66] }]
        };

        var J2 = {
            "utente": "Blue", "squadra": [
                { "id": 292, "mosse": [10, 86, 92, 230] },
                { "id": 649, "mosse": [328, 312, 68, 126] },
                { "id": 122, "mosse": [184, 66, 3, 46] },
                { "id": 250, "mosse": [163, 14, 220, 170] },
                { "id": 292, "mosse": [10, 86, 92, 230] },
                { "id": 55, "mosse": [253, 10, 41, 66] }]
        };
        var A1 = { "utente": "Red", "azione": "mossa", "valore": 10 };
        var A2 = { "utente": "Blue", "azione": "mossa", "valore": 10 };

        var B1 = { "utente": "Red", "azione": "switch", "valore": 649 };
        var B2 = { "utente": "Blue", "azione": "attesa", "valore": 649 };

        var C1 = { "utente": "Red", "azione": "forfeit", "valore": 0 };
        var C2 = { "utente": "Blue", "azione": "forfeit", "valore": 0 };

        var D1 = { "utente": "Red", "azione": "attesa", "valore": 0 };
        var D2 = { "utente": "Blue", "azione": "attesa", "valore": 0 };

        var E1 = { "utente": "Red", "azione": "mossa", "valore": 10 };
        var E2 = { "utente": "CPU", "azione": "mossa", "valore": 10 };

        function callback(msg) {
            var elem = document.getElementById("arrival");
            elem.innerHTML = msg + "\n" + elem.innerHTML;
        }

        function test1() {
            x = new BCPController(J1.utente, J1.squadra, callback);
            y = new BCPController(J2.utente, J2.squadra, function (e) { });
        }
        function test2() {
            x.sendRequest(J2.utente);
            y.sendRefuse(J1.utente);
        }
        function test3() {
            x.sendRequest(J2.utente);
            y.sendAccept(J1.utente);
        }
        //atessa/switch
        function test4() {
            x.sendBattleMessage(B1);
            y.sendBattleMessage(B2);
        }
        //action/action
        function test5() {
            x.sendBattleMessage(A1);
            y.sendBattleMessage(A2);
        }
        //forfeit/action
        function test6() {
            x.sendBattleMessage(A1);
            y.sendBattleMessage(C2);
        }

        function test7() {
            x.startCPU(J2.squadra);
        }

        function test8() {
            x.sendBattleMessage(E1);
            x.sendBattleCPUMessage(E2);
        }

        function test9() {
            x.sendBattleMessage(C1);
            x.sendBattleCPUMessage(E2);
        }

    </script>
</head>
<body class="text-center">
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="/"> <img src="assets/img/barra_di_navigazione/pokemon_logo_home_page.png" height="40"
                alt=""> Fan.Site</a>
    
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
    
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <form class="form-inline my-2 my-lg-0">
                <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
                <button class="btn btn-outline-primary my-2 my-sm-0" type="submit"><img
                        src="assets/img/barra_di_navigazione/pokeball_submit.png" height="30" alt=""></button>
            </form>
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="#">sign up <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="#">Log in <span class="sr-only">(current)</span></a>
                </li>
                
            </ul>
        </div>
    </nav>
    <!--
    Use example 
-->
    <br>
    <!-- Test Cases -->
    <div class="container">
        <div class="card w-50">
            <div class="card-body">
                <div class="btn-group-vertical">
                    <button type="button" class="btn btn-primary" onclick="test1()">Connect
                        players</button>
                    <button type="button" class="btn btn-outline-primary" onclick="test2()">request/refuse</button>
                    <button type="button" class="btn btn-primary" onclick="test3()">request/accept</button>
                </div>
                <div class="btn-group-vertical">
                    <button type="button" class="btn btn-primary" onclick="test4()">action/switch</button>
                    <button type="button" class="btn btn-outline-primary" onclick="test5()">action/action</button>
                    <button type="button" class="btn btn-primary" onclick="test6()">forfeit/action</button>
                </div>
                <br>
                <br>
                <div class="btn-group" role="group" aria-label="Basic example">
                    <button type="button" class="btn btn-primary" onclick="test7()">CPU</button> 
                    <button type="button" class="btn btn-primary" onclick="test8()">CPU-Battle</button> 
                    <button type="button" class="btn btn-primary" onclick="test9()">CPU-Forfeit</button> 
                </div>
                <br>
                <br>
                <textarea class="form-control" id="arrival"> hello  </textarea>
            </div>
        </div>
    </div>

    <!-- <script>includeHTML();</script> -->
</body>

</html>