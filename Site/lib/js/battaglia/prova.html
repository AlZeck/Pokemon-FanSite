<!-- LINK PER CHIAMARLO UNA VOLTA ATTIVATO SERVER: http://localhost/lib/js/battaglia/prova.html -->

<!DOCTYPE html>
<HTML>

<HEAD>
    <TITLE> PROVA </TITLE>

    <META charset="utf-8">

    <!-- PRENDO JQUERY DA INTERNET DALLE API GOOGLE -->
	<SCRIPT src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></SCRIPT>

    <SCRIPT type="text/javascript" lang="javascript" src="./vue.min.js"></SCRIPT>
    <SCRIPT type="text/javascript" lang="javascript" src="./testing.js"></SCRIPT>
    <SCRIPT type="text/javascript" lang="javascript" src="../websockets/BCPController.js"></SCRIPT>
    <SCRIPT type="text/javascript" lang="javascript" src="./miovue.js"></SCRIPT>
    <SCRIPT type="text/javascript" lang="javascript" src="./battaglia.js"></SCRIPT>
</HEAD>



<BODY>
    <SPAN id="mioVue">

        <TABLE summary="Tabella della battaglia" border=1>

            <TR>
                <TD align="center" colspan="3">
                    <H2> SEI STATO SFIDATO DA {{ avversario.username }} ALLENATORE! </H2>
                </TD>
            </TR>


            <TR>
                <TD>
                    <UL>
                        <LI v-on:click="cambiaSelectedPkmPrt(1)">
                            <IMG v-bind:src="primoPkmPrt.mini_sprite" alt="mini-sprite">
                            {{ primoPkmPrt.nome }}
                        </LI>

                        <LI v-on:click="cambiaSelectedPkmPrt(2)">
                            <IMG v-bind:src="secondoPkmPrt.mini_sprite" alt="mini-sprite">
                            {{ secondoPkmPrt.nome }}
                        </LI>

                        <LI v-on:click="cambiaSelectedPkmPrt(3)">
                            <IMG v-bind:src="terzoPkmPrt.mini_sprite" alt="mini-sprite">
                            {{ terzoPkmPrt.nome }}
                        </LI>

                        <LI v-on:click="cambiaSelectedPkmPrt(4)">
                            <IMG v-bind:src="quartoPkmPrt.mini_sprite" alt="mini-sprite">
                            {{ quartoPkmPrt.nome }}
                        </LI>

                        <LI v-on:click="cambiaSelectedPkmPrt(5)">
                            <IMG v-bind:src="quintoPkmPrt.mini_sprite" alt="mini-sprite">
                            {{ quintoPkmPrt.nome }}
                        </LI>

                        <LI v-on:click="cambiaSelectedPkmPrt(6)">
                            <IMG v-bind:src="sestoPkmPrt.mini_sprite" alt="mini-sprite">
                            {{ sestoPkmPrt.nome }}
                        </LI>
                    </UL>
                </TD>

                <TD>
                    <DIV align="right">
                        INDEX HIS ACTIVE POKEMON: {{ avversario.indexActivePkm }} <BR/>
                        NOME: {{ activePkmAvv.nome }} <BR/>

                        <SPAN v-if="activePkmAvv.ps <= activePkmAvv.psMax/4" id="psAvv" style="color: red;"> PS: {{ activePkmAvv.ps }} </SPAN>
                        <SPAN v-else-if="activePkmAvv.ps <= activePkmAvv.psMax/2" id="psAvv" style="color: yellow;"> PS: {{ activePkmAvv.ps }} </SPAN>
                        <SPAN v-else id="psAvv" style="color: green;"> PS: {{ activePkmAvv.ps }} </SPAN> <BR/>

                        <IMG v-if="! avversario.indexSprite" id="spriteAvv" v-bind:src="activePkmAvv.front_sprite" alt="front-sprite">
                        <IMG v-else id="spriteAvv" src="/assets/img/pokeball.png" alt="front-sprite">
                    </DIV>

                    <IMG v-if="! protagonista.indexSprite" id="spritePrt" v-bind:src="activePkmPrt.back_sprite" alt="back-sprite">
                    <IMG v-else id="spritePrt" src="/assets/img/pokeball.png" alt="back-sprite"> <BR/>

                    INDEX MY ACTIVE POKEMON: {{ protagonista.indexActivePkm }} <BR/>
                    NOME: {{ activePkmPrt.nome }} <BR/>

                    <SPAN v-if="activePkmPrt.ps <= activePkmPrt.psMax/4" id="psPrt" style="color: red;"> PS: {{ activePkmPrt.ps }} </SPAN>
                    <SPAN v-else-if="activePkmPrt.ps <= activePkmPrt.psMax/2" id="psPrt" style="color: yellow;"> PS: {{ activePkmPrt.ps }} </SPAN>
                    <SPAN v-else id="psPrt" style="color: green;"> PS: {{ activePkmPrt.ps }} </SPAN>
                </TD>

                <TD>
                    <UL>
                        <LI v-on:click="cambiaSelectedPkmAvv(1)">
                            <IMG v-bind:src="primoPkmAvv.mini_sprite" alt="mini-sprite">
                            {{ primoPkmAvv.nome }}
                        </LI>

                        <LI v-on:click="cambiaSelectedPkmAvv(2)">
                            <IMG v-bind:src="secondoPkmAvv.mini_sprite" alt="mini-sprite">
                            {{ secondoPkmAvv.nome }}
                        </LI>

                        <LI v-on:click="cambiaSelectedPkmAvv(3)">
                            <IMG v-bind:src="terzoPkmAvv.mini_sprite" alt="mini-sprite">
                            {{ terzoPkmAvv.nome }}
                        </LI>

                        <LI v-on:click="cambiaSelectedPkmAvv(4)">
                            <IMG v-bind:src="quartoPkmAvv.mini_sprite" alt="mini-sprite">
                            {{ quartoPkmAvv.nome }}
                        </LI>

                        <LI v-on:click="cambiaSelectedPkmAvv(5)">
                            <IMG v-bind:src="quintoPkmAvv.mini_sprite" alt="mini-sprite">
                            {{ quintoPkmAvv.nome }}
                        </LI>

                        <LI v-on:click="cambiaSelectedPkmAvv(6)">
                            <IMG v-bind:src="sestoPkmAvv.mini_sprite" alt="mini-sprite">
                            {{ sestoPkmAvv.nome }}
                        </LI>
                    </UL>
                </TD>
            </TR>


            <TR>
                <TD>
                    INDEX MY SELECTED POKEMON: {{ protagonista.indexSelectedPkm }} <BR/>
                    MINI-SPRITE: <IMG v-bind:src="selectedPkmPrt.mini_sprite" alt="mini-sprite"> <BR/>
                    NOME: {{ selectedPkmPrt.nome }} <BR/>
                    TYPING: {{ selectedPkmPrt.tipo1 }}
                    <SPAN v-if="selectedPkmPrt.tipo2 != null"> - {{ selectedPkmPrt.tipo2 }} </SPAN> <BR/> <BR/>

                    PS: {{ selectedPkmPrt.ps }} <BR/>
                    ATT: {{ selectedPkmPrt.att }} <BR/>
                    DIF: {{ selectedPkmPrt.dif }} <BR/>
                    ATTS: {{ selectedPkmPrt.atts }} <BR/>
                    DIFS: {{ selectedPkmPrt.difs }} <BR/>
                    VEL: {{ selectedPkmPrt.vel }} <BR/> <BR/>

                    MOSSE:
                    <UL>
                        <LI v-for="m in selectedPkmPrt.mosse"> {{ m.nome }} </LI>
                    </UL>
                </TD>

                <TD>
                    MOSSE MY ACTIVE POKEMON:
                    <UL>
                        <LI v-for="m in activePkmPrt.mosse" v-bind:value="m.id" v-on:click="mandaMossa"> {{ m.nome }} -
                            {{ m.tipo }} - {{ m.potenza }} - {{ m.precisione }} - {{ m.categoria }} </LI>
                    </UL>
                </TD>

                <TD>
                    INDEX HIS SELECTED POKEMON: {{ avversario.indexSelectedPkm }} <BR/>
                    MINI-SPRITE: <IMG v-bind:src="selectedPkmAvv.mini_sprite" alt="mini-sprite"> <BR/>
                    NOME: {{ selectedPkmAvv.nome }} <BR/>
                    TYPING: {{ selectedPkmAvv.tipo1 }}
                    <SPAN v-if="selectedPkmAvv.tipo2 != null"> - {{ selectedPkmAvv.tipo2 }} </SPAN> <BR/> <BR/>

                    PS: {{ selectedPkmAvv.ps }} <BR/>
                    ATT: {{ selectedPkmAvv.att }} <BR/>
                    DIF: {{ selectedPkmAvv.dif }} <BR/>
                    ATTS: {{ selectedPkmAvv.atts }} <BR/>
                    DIFS: {{ selectedPkmAvv.difs }} <BR/>
                    VEL: {{ selectedPkmAvv.vel }} <BR/> <BR/>

                    MOSSE:
                    <UL>
                        <LI v-for="m in selectedPkmAvv.mosse"> {{ m.nome }} </LI>
                    </UL>
                </TD>
            </TR>


            <TR>
                <TD>
                    <BUTTON id="switch" v-on:click="mandaSwitch"
                        v-bind:disabled="!switchAttivo || protagonista.indexSelectedPkm == protagonista.indexActivePkm || protagonista.squadra[protagonista.indexSelectedPkm].ps <= 0">
                        switch </BUTTON>
                </TD>

                <TD></TD>

                <TD align="right">
                    <BUTTON id="forfeit" v-on:click="mandaForfeit" v-bind:disabled="!forfeitAttivo"> forfeit </BUTTON>
                </TD>
            </TR>


            <TR>
                <td id="testoBattaglia" colspan="3" align="center">
                    testo battaglia
                </td>
            </TR>

        </TABLE>


    </SPAN>
</BODY>

</HTML>